// lib/i18n.ts
import { createContext, useContext, useMemo, useState, type ReactNode } from 'react';

export type Locale = 'en' | 'es' | 'ru';

type TranslationMap = Record<string, string>;

const translations: Record<Locale, TranslationMap> = {
  en: {
    'common.language.en': 'English',
    'common.language.es': 'Español',
    'common.language.ru': 'Русский',
    'common.fieldResearcher': 'field researcher',
    'common.missingValue': '—',
    'common.done': 'Done',

    'home.kicker': 'Oregon Turtle Conservancy',
    'home.tagline': 'Wetlands, woodlands, wild heart.',
    'home.welcomeUser': 'Welcome, {name}!',
    'home.welcomeGuest': 'Welcome to Oregon Turtles',
    'home.subtitle': 'Protecting native turtle habitats through research, restoration, and community science.',
    'home.ctaExplore': 'Explore species',
    'home.ctaLogObservation': 'Log an observation',
    'home.feature.nativeHabitats.title': 'Native habitats',
    'home.feature.nativeHabitats.value': 'Rivers, ponds, marshlands',
    'home.feature.fieldReady.title': 'Field-ready',
    'home.feature.fieldReady.value': 'Offline notes, quick IDs',
    'home.stat.value': '200+',
    'home.stat.label': 'wetland reports this season',
    'home.strip.title': 'Rooted in the landscape',
    'home.strip.copy': "Track the native turtles that belong here and the ones that don't.",
    'home.auth.joinTitle': 'Join the community',
    'home.auth.joinCopy': 'Create an account to log your observations and stay current on conservation work across Oregon.',
    'home.auth.login': 'Log in',
    'home.auth.signup': 'Sign up',
    'home.auth.signedInTitle': "You're signed in",
    'home.auth.signedInCopy': 'Visit Species to refresh your field ID skills, or share a new sighting from the field in Observations.',
    'home.auth.recordObservation': 'Record observation',
    'home.auth.accountInfo': 'Account info',
    'home.languageToggle': 'Language',

    'observations.hero.kicker': 'Observation log',
    'observations.hero.title': 'Share your sighting',
    'observations.hero.subtitle': 'Thanks, {name}. Follow these steps so our biologists can verify and protect turtle habitats.',
    'observations.stepLabel': 'Step {number}',
    'observations.step1.title': 'Upload photo(s)',
    'observations.step1.instruction': 'Make sure much of the turtle(s) is/are visible including head and belly. If you find multiple turtles at once, make sure to include them all.',
    'observations.step.source': '— oregonturtles.org',
    'observations.step1.warningTitle': 'Warning',
    'observations.step1.warningCopy': 'DO NOT DISTURB THE TURTLE(S) WHILE TAKING PICTURES',
    'observations.photos.choose': 'Choose from library',
    'observations.photos.take': 'Take a photo',
    'observations.photos.remove': 'Remove',
    'observations.step2.title': 'Where did you see the turtle(s)?',
    'observations.step2.instruction': 'Navigate to the location using the map and drop a pin there. Zoom in to be as accurate as possible.',
    'observations.location.useCurrent': 'Use my current location',
    'observations.location.latitude': 'Latitude',
    'observations.location.longitude': 'Longitude',
    'observations.location.nameLabel': 'Location name (optional)',
    'observations.location.namePlaceholder': 'Crystal Springs Rhododendron Garden',
    'observations.location.latPlaceholder': '45.5231',
    'observations.location.lonPlaceholder': '-122.6765',
    'observations.step3.title': 'Tell us about each turtle',
    'observations.step3.instruction': "Start by telling us how many turtles you observed. Then give us species, behaviors, and notes for every turtle you spotted. If you aren't sure, choose Unknown Turtle.",
    'observations.count.label': 'How many turtles did you see?',
    'observations.count.placeholder': '1',
    'observations.turtle.header': 'Turtle {number}',
    'observations.turtle.speciesLabel': 'Species of turtle {number}',
    'observations.turtle.activityLabel': 'What is turtle {number} doing?',
    'observations.dropdown.placeholder': 'Select all that apply',
    'observations.turtle.notesLabel': 'Notes about turtle {number}',
    'observations.turtle.notesPlaceholder': 'Describe markings, behavior, or anything notable.',
    'observations.species.redEaredSlider.name': 'Red-eared Slider',
    'observations.species.redEaredSlider.description': 'Non-native, yellow stripes with a red patch behind the eye.',
    'observations.species.westernPainted.name': 'Western Painted Turtle',
    'observations.species.westernPainted.description': 'Native, bright plastron with red/orange edging.',
    'observations.species.northwesternPond.name': 'Northwestern (Western) Pond Turtle',
    'observations.species.northwesternPond.description': 'Native, muted brown/olive shell with creamy yellow underside.',
    'observations.species.commonSnapping.name': 'Common Snapping Turtle',
    'observations.species.commonSnapping.description': 'Non-native, powerful beak, rugged shell, ridged tail.',
    'observations.species.unknown.name': 'Unknown Turtle',
    'observations.species.unknown.description': 'Not sure? Choose this and add clues in the notes.',
    'observations.activity.Basking': 'Basking',
    'observations.activity.Nesting': 'Nesting',
    'observations.activity.Walking': 'Walking',
    'observations.activity.Swimming': 'Swimming',
    'observations.activity.Other': 'Other',
    'observations.when.title': 'When did you see these turtles?',
    'observations.action.title': 'Action taken',
    'observations.action.observed': 'Observed',
    'observations.action.moved': 'Moved',
    'observations.action.collected': 'Collected',
    'observations.action.called': 'Called local agency',
    'observations.action.other': 'Other',
    'observations.action.otherPlaceholder': 'If other, please explain.',
    'observations.additional.title': 'Additional notes',
    'observations.additional.placeholder': 'Anything else we should know about the sighting?',
    'observations.submit': 'Submit observation',
    'observations.alert.signIn.title': 'Sign in required',
    'observations.alert.signIn.body': 'Log in to record an observation.',
    'observations.alert.photos.title': 'Add photos',
    'observations.alert.photos.body': 'Please attach at least one clear photo of the turtle(s).',
    'observations.alert.location.title': 'Location needed',
    'observations.alert.location.body': 'Add coordinates of the sighting or use the current location shortcut.',
    'observations.alert.count.title': 'Check turtle count',
    'observations.alert.count.body': 'Enter how many turtles you observed (use whole numbers).',
    'observations.alert.turtleMismatch.title': 'Update turtle details',
    'observations.alert.turtleMismatch.body': 'The number of turtle sections does not match the count you entered.',
    'observations.alert.actionOther.title': 'Add action details',
    'observations.alert.actionOther.body': 'Describe the action you took.',
    'observations.alert.permission.library.title': 'Permission needed',
    'observations.alert.permission.library.body': 'Media library access is required to pick photos.',
    'observations.alert.permission.camera.title': 'Permission needed',
    'observations.alert.permission.camera.body': 'Camera access is required to take photos.',
    'observations.alert.permission.location.title': 'Permission needed',
    'observations.alert.permission.location.body': 'Location access is required to fill coordinates.',
    'observations.alert.photoPickerError.title': 'Photo picker error',
    'observations.alert.photoPickerError.body': 'Unable to pick images right now.',
    'observations.alert.cameraError.title': 'Camera error',
    'observations.alert.cameraError.body': 'Unable to open the camera right now.',
    'observations.alert.locationError.title': 'Location error',
    'observations.alert.locationError.body': 'Unable to fetch your location.',
    'observations.alert.submissionSuccess.title': 'Observation submitted',
    'observations.alert.submissionSuccess.body': "Thank you for supporting Oregon's turtles!",
    'observations.alert.submissionSuccess.cta': 'Go home',
    'observations.alert.submissionError.title': 'Submission error',
    'observations.alert.submissionError.body': 'We could not save your observation right now.',
    'observations.notePrefix': 'Turtle {number}',

    'login.title': 'Welcome back',
    'login.subtitle': 'Sign in to manage your sightings and access member resources.',
    'login.email': 'Email address',
    'login.emailPlaceholder': 'you@example.org',
    'login.password': 'Password',
    'login.passwordPlaceholder': '••••••••',
    'login.button': 'Log in',
    'login.loading': 'Logging in…',
    'login.footerPrompt': "Don't have an account?",
    'login.footerLink': 'Sign up',
    'login.alert.missing.title': 'Missing info',
    'login.alert.missing.body': 'Enter both your email address and password.',
    'login.alert.failed.title': 'Login failed',
    'login.alert.failed.body': 'Unknown error',

    'signup.title': 'Create your account',
    'signup.subtitle': 'Become part of the network of volunteers and biologists monitoring turtle populations across Oregon.',
    'signup.firstName': 'First name',
    'signup.firstNamePlaceholder': 'Jane',
    'signup.lastName': 'Last name',
    'signup.lastNamePlaceholder': 'Doe',
    'signup.affiliation': 'Affiliation',
    'signup.affiliationPlaceholder': 'Oregon Dept. of Fish & Wildlife',
    'signup.email': 'Email address',
    'signup.emailPlaceholder': 'you@example.org',
    'signup.password': 'Password',
    'signup.passwordPlaceholder': 'Create a password',
    'signup.button': 'Sign up',
    'signup.loading': 'Creating account…',
    'signup.footerPrompt': 'Already have an account?',
    'signup.footerLink': 'Log in',
    'signup.alert.missing.title': 'Missing info',
    'signup.alert.missing.body': 'Please fill out first name, last name, email, and password.',
    'signup.alert.failed.title': 'Sign up failed',
    'signup.alert.failed.body': 'Unknown error',
    'signup.alert.checkEmail.title': 'Check your email',
    'signup.alert.checkEmail.body': 'We sent you a confirmation link to finish sign up.',
    'signup.alert.accountCreated.title': 'Account created',
    'signup.alert.accountCreated.body': 'Your account is ready. Please log in.',

    'account.kicker': 'Account',
    'account.title': 'Your profile',
    'account.subtitle': 'Update your details in Supabase to keep your conservation credits accurate.',
    'account.name': 'Name',
    'account.email': 'Email',
    'account.affiliation': 'Affiliation',
    'account.edit.title': 'Need to make changes?',
    'account.edit.copy': "Profile edits live in our Supabase dashboard. Reach out if you'd like us to refresh your details or invite collaborators.",
    'account.signOut': 'Sign out',
    'account.observations.title': 'Your observations',
    'account.observations.copy': "Here's a quick look at the sightings you've logged so far.",
    'account.loading': 'Loading your observations…',
    'account.error': "We couldn't load your observations right now. Try again later.",
    'account.empty': 'No observations recorded yet. Head to Observations to share your first sighting!',
    'account.observation.species': 'Species:',
    'account.observation.count': 'Count:',
    'account.observation.location': 'Location:',
    'account.observation.activity': 'Activity:',
    'account.observation.action': 'Action:',
    'account.observation.unknownCount': 'Unknown',
    'account.observation.other': 'Other',

    'signout.label': 'Signing you out…',

    'species.index.kicker': 'Field guide',
    'species.index.title': 'Native & notable turtles',
    'species.index.subtitle': 'Tap a species to learn key identification tips, habitat preferences, and management guidance.',
    'species.index.empty': 'No species available yet.',
    'species.card.cta': 'View details',
    'species.detail.missing': 'Species not found.',
    'species.detail.return': 'Return to field guide',
    'species.detail.back': '← Back to species',
    'species.detail.native': 'Native species',
    'species.detail.nonNative': 'Non-native species',
    'species.detail.description': 'Description',
    'species.detail.habitat': 'Habitat',
    'species.detail.status': 'Status',
    'species.detail.range': 'Range',
    'species.detail.impacts': 'Impacts',
    'species.detail.regulations': 'Regulations',
    'species.detail.source': 'Source: {url}',

    'drawer.home': 'Home',
    'drawer.species': 'Species',
    'drawer.login': 'Log in',
    'drawer.signup': 'Sign up',
    'drawer.observations': 'Observations',
    'drawer.account': 'Account info',
    'drawer.signout': 'Sign out',
    'drawer.speciesDetail': 'Species detail',
  },
  es: {
    'common.language.en': 'Inglés',
    'common.language.es': 'Español',
    'common.language.ru': 'Ruso',
    'common.fieldResearcher': 'investigador de campo',
    'common.missingValue': '—',
    'common.done': 'Listo',

    'home.kicker': 'Conservatorio de Tortugas de Oregón',
    'home.tagline': 'Humedales, bosques y corazón salvaje.',
    'home.welcomeUser': 'Bienvenido, {name}!',
    'home.welcomeGuest': 'Bienvenido a Tortugas de Oregón',
    'home.subtitle': 'Protegiendo los hábitats de tortugas nativas mediante investigación, restauración y ciencia comunitaria.',
    'home.ctaExplore': 'Explorar especies',
    'home.ctaLogObservation': 'Registrar observación',
    'home.feature.nativeHabitats.title': 'Hábitats nativos',
    'home.feature.nativeHabitats.value': 'Ríos, estanques, humedales',
    'home.feature.fieldReady.title': 'Listo para campo',
    'home.feature.fieldReady.value': 'Notas sin conexión, identificación rápida',
    'home.stat.value': '200+',
    'home.stat.label': 'reportes de humedales esta temporada',
    'home.strip.title': 'Arraigados en el paisaje',
    'home.strip.copy': 'Sigue a las tortugas nativas que pertenecen aquí y a las que no.',
    'home.auth.joinTitle': 'Únete a la comunidad',
    'home.auth.joinCopy': 'Crea una cuenta para registrar tus observaciones y mantenerte al día con el trabajo de conservación en Oregón.',
    'home.auth.login': 'Iniciar sesión',
    'home.auth.signup': 'Registrarse',
    'home.auth.signedInTitle': 'Ya iniciaste sesión',
    'home.auth.signedInCopy': 'Visita Especies para repasar tus habilidades de identificación o comparte un nuevo avistamiento en Observaciones.',
    'home.auth.recordObservation': 'Registrar observación',
    'home.auth.accountInfo': 'Información de cuenta',
    'home.languageToggle': 'Idioma',

    'observations.hero.kicker': 'Registro de observación',
    'observations.hero.title': 'Comparte tu avistamiento',
    'observations.hero.subtitle': 'Gracias, {name}. Sigue estos pasos para que nuestros biólogos verifiquen y protejan los hábitats de tortugas.',
    'observations.stepLabel': 'Paso {number}',
    'observations.step1.title': 'Sube foto(s)',
    'observations.step1.instruction': 'Asegúrate de que se vea la mayor parte de la(s) tortuga(s), incluida la cabeza y el vientre. Si encuentras varias a la vez, incluye a todas.',
    'observations.step.source': '— oregonturtles.org',
    'observations.step1.warningTitle': 'Advertencia',
    'observations.step1.warningCopy': 'NO MOLESTES A LA(S) TORTUGA(S) AL TOMAR FOTOS',
    'observations.photos.choose': 'Elegir de la biblioteca',
    'observations.photos.take': 'Tomar foto',
    'observations.photos.remove': 'Eliminar',
    'observations.step2.title': '¿Dónde viste la(s) tortuga(s)?',
    'observations.step2.instruction': 'Navega al lugar en el mapa y deja un pin. Acércate lo más posible para ser preciso.',
    'observations.location.useCurrent': 'Usar mi ubicación actual',
    'observations.location.latitude': 'Latitud',
    'observations.location.longitude': 'Longitud',
    'observations.location.nameLabel': 'Nombre del lugar (opcional)',
    'observations.location.namePlaceholder': 'Jardín Crystal Springs Rhododendron',
    'observations.location.latPlaceholder': '45.5231',
    'observations.location.lonPlaceholder': '-122.6765',
    'observations.step3.title': 'Cuéntanos sobre cada tortuga',
    'observations.step3.instruction': 'Primero dinos cuántas tortugas observaste. Luego agrega especie, comportamientos y notas para cada una. Si no estás seguro, elige Tortuga desconocida.',
    'observations.count.label': '¿Cuántas tortugas viste?',
    'observations.count.placeholder': '1',
    'observations.turtle.header': 'Tortuga {number}',
    'observations.turtle.speciesLabel': 'Especie de la tortuga {number}',
    'observations.turtle.activityLabel': '¿Qué está haciendo la tortuga {number}?',
    'observations.dropdown.placeholder': 'Selecciona todas las que apliquen',
    'observations.turtle.notesLabel': 'Notas sobre la tortuga {number}',
    'observations.turtle.notesPlaceholder': 'Describe marcas, comportamiento o algo notable.',
    'observations.species.redEaredSlider.name': 'Tortuga de orejas rojas',
    'observations.species.redEaredSlider.description': 'No nativa, rayas amarillas con parche rojo detrás del ojo.',
    'observations.species.westernPainted.name': 'Tortuga pintada occidental',
    'observations.species.westernPainted.description': 'Nativa, plastrón brillante con bordes rojos/naranjas.',
    'observations.species.northwesternPond.name': 'Tortuga de estanque del noroeste',
    'observations.species.northwesternPond.description': 'Nativa, caparazón marrón/oliva tenue con parte inferior crema.',
    'observations.species.commonSnapping.name': 'Tortuga lagarto común',
    'observations.species.commonSnapping.description': 'No nativa, pico poderoso, caparazón rugoso y cola con crestas.',
    'observations.species.unknown.name': 'Tortuga desconocida',
    'observations.species.unknown.description': '¿No estás seguro? Elige esto y agrega pistas en las notas.',
    'observations.activity.Basking': 'Tomando sol',
    'observations.activity.Nesting': 'Anidando',
    'observations.activity.Walking': 'Caminando',
    'observations.activity.Swimming': 'Nadando',
    'observations.activity.Other': 'Otro',
    'observations.when.title': '¿Cuándo viste estas tortugas?',
    'observations.action.title': 'Acción tomada',
    'observations.action.observed': 'Observada',
    'observations.action.moved': 'Movida',
    'observations.action.collected': 'Colectada',
    'observations.action.called': 'Llamé a una agencia local',
    'observations.action.other': 'Otra',
    'observations.action.otherPlaceholder': 'Si es otra, por favor explica.',
    'observations.additional.title': 'Notas adicionales',
    'observations.additional.placeholder': '¿Qué más deberíamos saber del avistamiento?',
    'observations.submit': 'Enviar observación',
    'observations.alert.signIn.title': 'Inicio de sesión requerido',
    'observations.alert.signIn.body': 'Inicia sesión para registrar una observación.',
    'observations.alert.photos.title': 'Agrega fotos',
    'observations.alert.photos.body': 'Adjunta al menos una foto clara de la(s) tortuga(s).',
    'observations.alert.location.title': 'Falta ubicación',
    'observations.alert.location.body': 'Agrega coordenadas del avistamiento o usa la ubicación actual.',
    'observations.alert.count.title': 'Revisa el número de tortugas',
    'observations.alert.count.body': 'Ingresa cuántas tortugas observaste (usa números enteros).',
    'observations.alert.turtleMismatch.title': 'Actualiza los detalles',
    'observations.alert.turtleMismatch.body': 'El número de secciones no coincide con la cantidad ingresada.',
    'observations.alert.actionOther.title': 'Agrega detalles de la acción',
    'observations.alert.actionOther.body': 'Describe la acción que tomaste.',
    'observations.alert.permission.library.title': 'Se necesita permiso',
    'observations.alert.permission.library.body': 'Se requiere acceso a la biblioteca para elegir fotos.',
    'observations.alert.permission.camera.title': 'Se necesita permiso',
    'observations.alert.permission.camera.body': 'Se requiere acceso a la cámara para tomar fotos.',
    'observations.alert.permission.location.title': 'Se necesita permiso',
    'observations.alert.permission.location.body': 'Se requiere acceso a la ubicación para completar las coordenadas.',
    'observations.alert.photoPickerError.title': 'Error al elegir fotos',
    'observations.alert.photoPickerError.body': 'No se pueden seleccionar imágenes ahora.',
    'observations.alert.cameraError.title': 'Error de cámara',
    'observations.alert.cameraError.body': 'No se puede abrir la cámara ahora.',
    'observations.alert.locationError.title': 'Error de ubicación',
    'observations.alert.locationError.body': 'No se pudo obtener tu ubicación.',
    'observations.alert.submissionSuccess.title': 'Observación enviada',
    'observations.alert.submissionSuccess.body': '¡Gracias por apoyar a las tortugas de Oregón!',
    'observations.alert.submissionSuccess.cta': 'Ir a inicio',
    'observations.alert.submissionError.title': 'Error al enviar',
    'observations.alert.submissionError.body': 'No pudimos guardar tu observación ahora.',
    'observations.notePrefix': 'Tortuga {number}',

    'login.title': 'Bienvenido de nuevo',
    'login.subtitle': 'Inicia sesión para gestionar tus avistamientos y acceder a recursos.',
    'login.email': 'Correo electrónico',
    'login.emailPlaceholder': 'tu@ejemplo.org',
    'login.password': 'Contraseña',
    'login.passwordPlaceholder': '••••••••',
    'login.button': 'Iniciar sesión',
    'login.loading': 'Iniciando sesión…',
    'login.footerPrompt': '¿No tienes cuenta?',
    'login.footerLink': 'Regístrate',
    'login.alert.missing.title': 'Faltan datos',
    'login.alert.missing.body': 'Ingresa tu correo y contraseña.',
    'login.alert.failed.title': 'Error al iniciar sesión',
    'login.alert.failed.body': 'Error desconocido',

    'signup.title': 'Crea tu cuenta',
    'signup.subtitle': 'Súmate a la red de voluntarios y biólogos que monitorean poblaciones de tortugas en Oregón.',
    'signup.firstName': 'Nombre',
    'signup.firstNamePlaceholder': 'Juana',
    'signup.lastName': 'Apellido',
    'signup.lastNamePlaceholder': 'Pérez',
    'signup.affiliation': 'Afiliación',
    'signup.affiliationPlaceholder': 'Depto. de Pesca y Vida Silvestre de Oregón',
    'signup.email': 'Correo electrónico',
    'signup.emailPlaceholder': 'tu@ejemplo.org',
    'signup.password': 'Contraseña',
    'signup.passwordPlaceholder': 'Crea una contraseña',
    'signup.button': 'Registrarse',
    'signup.loading': 'Creando cuenta…',
    'signup.footerPrompt': '¿Ya tienes cuenta?',
    'signup.footerLink': 'Inicia sesión',
    'signup.alert.missing.title': 'Faltan datos',
    'signup.alert.missing.body': 'Completa nombre, apellido, correo y contraseña.',
    'signup.alert.failed.title': 'Error al registrarse',
    'signup.alert.failed.body': 'Error desconocido',
    'signup.alert.checkEmail.title': 'Revisa tu correo',
    'signup.alert.checkEmail.body': 'Te enviamos un enlace de confirmación para terminar el registro.',
    'signup.alert.accountCreated.title': 'Cuenta creada',
    'signup.alert.accountCreated.body': 'Tu cuenta está lista. Por favor inicia sesión.',

    'account.kicker': 'Cuenta',
    'account.title': 'Tu perfil',
    'account.subtitle': 'Actualiza tus datos en Supabase para mantener exactos tus créditos de conservación.',
    'account.name': 'Nombre',
    'account.email': 'Correo',
    'account.affiliation': 'Afiliación',
    'account.edit.title': '¿Necesitas cambios?',
    'account.edit.copy': 'Las ediciones viven en nuestro panel de Supabase. Escríbenos si quieres actualizar tus datos o invitar colaboradores.',
    'account.signOut': 'Cerrar sesión',
    'account.observations.title': 'Tus observaciones',
    'account.observations.copy': 'Un vistazo rápido a los avistamientos que has registrado.',
    'account.loading': 'Cargando tus observaciones…',
    'account.error': 'No pudimos cargar tus observaciones ahora. Intenta más tarde.',
    'account.empty': 'Aún no hay observaciones. Ve a Observaciones para compartir la primera.',
    'account.observation.species': 'Especie:',
    'account.observation.count': 'Cantidad:',
    'account.observation.location': 'Ubicación:',
    'account.observation.activity': 'Actividad:',
    'account.observation.action': 'Acción:',
    'account.observation.unknownCount': 'Desconocida',
    'account.observation.other': 'Otra',

    'signout.label': 'Cerrando sesión…',

    'species.index.kicker': 'Guía de campo',
    'species.index.title': 'Tortugas nativas y destacadas',
    'species.index.subtitle': 'Toca una especie para conocer claves de identificación, hábitat y manejo.',
    'species.index.empty': 'Aún no hay especies disponibles.',
    'species.card.cta': 'Ver detalles',
    'species.detail.missing': 'Especie no encontrada.',
    'species.detail.return': 'Volver a la guía',
    'species.detail.back': '← Volver a especies',
    'species.detail.native': 'Especie nativa',
    'species.detail.nonNative': 'Especie no nativa',
    'species.detail.description': 'Descripción',
    'species.detail.habitat': 'Hábitat',
    'species.detail.status': 'Estado',
    'species.detail.range': 'Distribución',
    'species.detail.impacts': 'Impactos',
    'species.detail.regulations': 'Regulaciones',
    'species.detail.source': 'Fuente: {url}',

    'drawer.home': 'Inicio',
    'drawer.species': 'Especies',
    'drawer.login': 'Iniciar sesión',
    'drawer.signup': 'Registrarse',
    'drawer.observations': 'Observaciones',
    'drawer.account': 'Información de cuenta',
    'drawer.signout': 'Cerrar sesión',
    'drawer.speciesDetail': 'Detalle de especie',
  },
  ru: {
    'common.language.en': 'Английский',
    'common.language.es': 'Испанский',
    'common.language.ru': 'Русский',
    'common.fieldResearcher': 'полевой исследователь',
    'common.missingValue': '—',
    'common.done': 'Готово',

    'home.kicker': 'Орегонский центр черепах',
    'home.tagline': 'Болота, леса и дикое сердце.',
    'home.welcomeUser': 'Добро пожаловать, {name}!',
    'home.welcomeGuest': 'Добро пожаловать в Oregon Turtles',
    'home.subtitle': 'Защищаем среду обитания местных черепах через исследования, восстановление и науку сообщества.',
    'home.ctaExplore': 'Изучить виды',
    'home.ctaLogObservation': 'Добавить наблюдение',
    'home.feature.nativeHabitats.title': 'Природные места',
    'home.feature.nativeHabitats.value': 'Реки, пруды, болота',
    'home.feature.fieldReady.title': 'Готово к полю',
    'home.feature.fieldReady.value': 'Оффлайн-заметки, быстрый ID',
    'home.stat.value': '200+',
    'home.stat.label': 'отчетов по болотам в этом сезоне',
    'home.strip.title': 'Корнями в ландшафте',
    'home.strip.copy': 'Отслеживайте местных черепах и тех, кто сюда не относится.',
    'home.auth.joinTitle': 'Присоединяйтесь к сообществу',
    'home.auth.joinCopy': 'Создайте аккаунт, чтобы фиксировать наблюдения и быть в курсе охраны природы в Орегоне.',
    'home.auth.login': 'Войти',
    'home.auth.signup': 'Регистрация',
    'home.auth.signedInTitle': 'Вы вошли',
    'home.auth.signedInCopy': 'Зайдите в раздел «Виды» для повторения ID или поделитесь новой находкой в «Наблюдениях».',
    'home.auth.recordObservation': 'Записать наблюдение',
    'home.auth.accountInfo': 'Данные аккаунта',
    'home.languageToggle': 'Язык',

    'observations.hero.kicker': 'Журнал наблюдений',
    'observations.hero.title': 'Поделитесь находкой',
    'observations.hero.subtitle': 'Спасибо, {name}. Следуйте шагам, чтобы биологи проверили данные и защитили места обитания.',
    'observations.stepLabel': 'Шаг {number}',
    'observations.step1.title': 'Загрузите фото',
    'observations.step1.instruction': 'Пусть на фото хорошо видно черепаху: голову и панцирь. Если их несколько, снимите всех.',
    'observations.step.source': '— oregonturtles.org',
    'observations.step1.warningTitle': 'Внимание',
    'observations.step1.warningCopy': 'НЕ БЕСПОКОЙТЕ ЧЕРЕПАХ(У) ПРИ СЪЕМКЕ',
    'observations.photos.choose': 'Выбрать из галереи',
    'observations.photos.take': 'Сделать фото',
    'observations.photos.remove': 'Удалить',
    'observations.step2.title': 'Где вы видели черепаху(т)?',
    'observations.step2.instruction': 'Найдите место на карте и поставьте метку. Приблизьте карту для точности.',
    'observations.location.useCurrent': 'Использовать мое местоположение',
    'observations.location.latitude': 'Широта',
    'observations.location.longitude': 'Долгота',
    'observations.location.nameLabel': 'Название места (необязательно)',
    'observations.location.namePlaceholder': 'Сад рододендронов Кристал Спрингс',
    'observations.location.latPlaceholder': '45.5231',
    'observations.location.lonPlaceholder': '-122.6765',
    'observations.step3.title': 'Расскажите о каждой черепахе',
    'observations.step3.instruction': 'Сначала укажите, сколько черепах вы видели. Затем выберите вид, поведение и добавьте заметки для каждой. Если не уверены — выберите «Неизвестная черепаха».',
    'observations.count.label': 'Сколько черепах вы видели?',
    'observations.count.placeholder': '1',
    'observations.turtle.header': 'Черепаха {number}',
    'observations.turtle.speciesLabel': 'Вид черепахи {number}',
    'observations.turtle.activityLabel': 'Что делает черепаха {number}?',
    'observations.dropdown.placeholder': 'Выберите все подходящее',
    'observations.turtle.notesLabel': 'Заметки о черепахе {number}',
    'observations.turtle.notesPlaceholder': 'Опишите отметины, поведение или важные детали.',
    'observations.species.redEaredSlider.name': 'Красноухая черепаха',
    'observations.species.redEaredSlider.description': 'Не местная, желтые полосы и красное пятно за глазом.',
    'observations.species.westernPainted.name': 'Расписная черепаха',
    'observations.species.westernPainted.description': 'Местная, яркий пластрон с красно-оранжевой окантовкой.',
    'observations.species.northwesternPond.name': 'Западная болотная черепаха',
    'observations.species.northwesternPond.description': 'Местная, тусклый коричнево-оливковый панцирь и кремовое брюшко.',
    'observations.species.commonSnapping.name': 'Каспийская (обыкновенная) каймановая черепаха',
    'observations.species.commonSnapping.description': 'Не местная, мощная челюсть, грубый панцирь, хвост с гребнями.',
    'observations.species.unknown.name': 'Неизвестная черепаха',
    'observations.species.unknown.description': 'Не уверены? Выберите это и добавьте подсказки в заметках.',
    'observations.activity.Basking': 'Греется',
    'observations.activity.Nesting': 'Гнездится',
    'observations.activity.Walking': 'Идет',
    'observations.activity.Swimming': 'Плывет',
    'observations.activity.Other': 'Другое',
    'observations.when.title': 'Когда вы видели этих черепах?',
    'observations.action.title': 'Принятые меры',
    'observations.action.observed': 'Наблюдал',
    'observations.action.moved': 'Переместил',
    'observations.action.collected': 'Изъял',
    'observations.action.called': 'Позвонил в местное ведомство',
    'observations.action.other': 'Другое',
    'observations.action.otherPlaceholder': 'Если другое, опишите.',
    'observations.additional.title': 'Дополнительные заметки',
    'observations.additional.placeholder': 'Что еще важно знать об этом наблюдении?',
    'observations.submit': 'Отправить наблюдение',
    'observations.alert.signIn.title': 'Требуется вход',
    'observations.alert.signIn.body': 'Войдите, чтобы сохранить наблюдение.',
    'observations.alert.photos.title': 'Добавьте фото',
    'observations.alert.photos.body': 'Прикрепите хотя бы одно четкое фото черепахи(ч).',
    'observations.alert.location.title': 'Нужны координаты',
    'observations.alert.location.body': 'Добавьте координаты или используйте текущее местоположение.',
    'observations.alert.count.title': 'Проверьте количество',
    'observations.alert.count.body': 'Укажите, сколько черепах вы видели (целое число).',
    'observations.alert.turtleMismatch.title': 'Обновите детали',
    'observations.alert.turtleMismatch.body': 'Число блоков черепах не совпадает с введенным количеством.',
    'observations.alert.actionOther.title': 'Добавьте детали действия',
    'observations.alert.actionOther.body': 'Опишите предпринятое действие.',
    'observations.alert.permission.library.title': 'Нужен доступ',
    'observations.alert.permission.library.body': 'Требуется доступ к медиатеке, чтобы выбрать фото.',
    'observations.alert.permission.camera.title': 'Нужен доступ',
    'observations.alert.permission.camera.body': 'Требуется доступ к камере, чтобы сделать фото.',
    'observations.alert.permission.location.title': 'Нужен доступ',
    'observations.alert.permission.location.body': 'Нужно разрешение на геолокацию, чтобы заполнить координаты.',
    'observations.alert.photoPickerError.title': 'Ошибка выбора фото',
    'observations.alert.photoPickerError.body': 'Не удается выбрать изображения сейчас.',
    'observations.alert.cameraError.title': 'Ошибка камеры',
    'observations.alert.cameraError.body': 'Не удается открыть камеру сейчас.',
    'observations.alert.locationError.title': 'Ошибка геолокации',
    'observations.alert.locationError.body': 'Не удалось получить ваше местоположение.',
    'observations.alert.submissionSuccess.title': 'Наблюдение отправлено',
    'observations.alert.submissionSuccess.body': 'Спасибо за поддержку черепах Орегона!',
    'observations.alert.submissionSuccess.cta': 'На главную',
    'observations.alert.submissionError.title': 'Ошибка отправки',
    'observations.alert.submissionError.body': 'Не удалось сохранить наблюдение сейчас.',
    'observations.notePrefix': 'Черепаха {number}',

    'login.title': 'С возвращением',
    'login.subtitle': 'Войдите, чтобы управлять наблюдениями и получить доступ к ресурсам.',
    'login.email': 'Электронная почта',
    'login.emailPlaceholder': 'you@example.org',
    'login.password': 'Пароль',
    'login.passwordPlaceholder': '••••••••',
    'login.button': 'Войти',
    'login.loading': 'Входим…',
    'login.footerPrompt': 'Нет аккаунта?',
    'login.footerLink': 'Зарегистрируйтесь',
    'login.alert.missing.title': 'Не хватает данных',
    'login.alert.missing.body': 'Введите почту и пароль.',
    'login.alert.failed.title': 'Не удалось войти',
    'login.alert.failed.body': 'Неизвестная ошибка',

    'signup.title': 'Создайте аккаунт',
    'signup.subtitle': 'Присоединяйтесь к сети волонтеров и биологов, наблюдающих черепах Орегона.',
    'signup.firstName': 'Имя',
    'signup.firstNamePlaceholder': 'Иван',
    'signup.lastName': 'Фамилия',
    'signup.lastNamePlaceholder': 'Иванов',
    'signup.affiliation': 'Организация',
    'signup.affiliationPlaceholder': 'Департамент рыбы и дикой природы Орегона',
    'signup.email': 'Электронная почта',
    'signup.emailPlaceholder': 'you@example.org',
    'signup.password': 'Пароль',
    'signup.passwordPlaceholder': 'Придумайте пароль',
    'signup.button': 'Зарегистрироваться',
    'signup.loading': 'Создаем аккаунт…',
    'signup.footerPrompt': 'Уже есть аккаунт?',
    'signup.footerLink': 'Войти',
    'signup.alert.missing.title': 'Не хватает данных',
    'signup.alert.missing.body': 'Укажите имя, фамилию, почту и пароль.',
    'signup.alert.failed.title': 'Ошибка регистрации',
    'signup.alert.failed.body': 'Неизвестная ошибка',
    'signup.alert.checkEmail.title': 'Проверьте почту',
    'signup.alert.checkEmail.body': 'Мы отправили ссылку подтверждения для завершения регистрации.',
    'signup.alert.accountCreated.title': 'Аккаунт создан',
    'signup.alert.accountCreated.body': 'Ваш аккаунт готов. Пожалуйста, войдите.',

    'account.kicker': 'Аккаунт',
    'account.title': 'Ваш профиль',
    'account.subtitle': 'Обновляйте данные в Supabase, чтобы кредиты за сохранение были точными.',
    'account.name': 'Имя',
    'account.email': 'Почта',
    'account.affiliation': 'Организация',
    'account.edit.title': 'Нужно изменить?',
    'account.edit.copy': 'Редактирование профиля в панели Supabase. Напишите нам, если нужно обновить данные или пригласить коллег.',
    'account.signOut': 'Выйти',
    'account.observations.title': 'Ваши наблюдения',
    'account.observations.copy': 'Краткий список зафиксированных вами находок.',
    'account.loading': 'Загружаем ваши наблюдения…',
    'account.error': 'Не удалось загрузить наблюдения. Попробуйте позже.',
    'account.empty': 'Наблюдений пока нет. Зайдите в раздел «Наблюдения», чтобы добавить первое!',
    'account.observation.species': 'Вид:',
    'account.observation.count': 'Количество:',
    'account.observation.location': 'Место:',
    'account.observation.activity': 'Активность:',
    'account.observation.action': 'Действие:',
    'account.observation.unknownCount': 'Неизвестно',
    'account.observation.other': 'Другое',

    'signout.label': 'Выход из аккаунта…',

    'species.index.kicker': 'Полевой гид',
    'species.index.title': 'Местные и важные черепахи',
    'species.index.subtitle': 'Откройте вид, чтобы узнать признаки, среду обитания и рекомендации по управлению.',
    'species.index.empty': 'Пока нет доступных видов.',
    'species.card.cta': 'Подробнее',
    'species.detail.missing': 'Вид не найден.',
    'species.detail.return': 'Вернуться к гиду',
    'species.detail.back': '← Назад к видам',
    'species.detail.native': 'Местный вид',
    'species.detail.nonNative': 'Чужеродный вид',
    'species.detail.description': 'Описание',
    'species.detail.habitat': 'Среда обитания',
    'species.detail.status': 'Статус',
    'species.detail.range': 'Ареал',
    'species.detail.impacts': 'Воздействия',
    'species.detail.regulations': 'Регуляции',
    'species.detail.source': 'Источник: {url}',

    'drawer.home': 'Главная',
    'drawer.species': 'Виды',
    'drawer.login': 'Войти',
    'drawer.signup': 'Регистрация',
    'drawer.observations': 'Наблюдения',
    'drawer.account': 'Данные аккаунта',
    'drawer.signout': 'Выйти',
    'drawer.speciesDetail': 'Детали вида',
  },
};

type TranslationKey = keyof typeof translations.en;

const TranslationContext = createContext<{
  locale: Locale;
  setLocale: (next: Locale) => void;
  t: (key: TranslationKey, params?: Record<string, string | number>) => string;
}>({
  locale: 'en',
  setLocale: () => {},
  t: (key) => translations.en[key] ?? key,
});

const format = (template: string, params?: Record<string, string | number>) => {
  if (!params) return template;
  return template.replace(/\{(\w+)\}/g, (_, name: string) => {
    const value = params[name];
    return value === undefined ? '' : String(value);
  });
};

const translate = (locale: Locale, key: TranslationKey, params?: Record<string, string | number>) => {
  const template = translations[locale]?.[key] ?? translations.en[key] ?? key;
  return format(template, params);
};

export function TranslationProvider({ children }: { children: ReactNode }) {
  const [locale, setLocale] = useState<Locale>('en');

  const value = useMemo(
    () => ({
      locale,
      setLocale,
      t: (key: TranslationKey, params?: Record<string, string | number>) =>
        translate(locale, key, params),
    }),
    [locale]
  );

  return <TranslationContext.Provider value={value}>{children}</TranslationContext.Provider>;
}

export const useTranslation = () => useContext(TranslationContext);
